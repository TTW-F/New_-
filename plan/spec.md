# 医疗诊断智能问答系统 - 项目规范书 (Specification)

## 1. 项目概述

### 1.1 项目名称
基于知识图谱的医疗诊断智能问答系统（GraphRAG 医疗 QA）

### 1.2 项目定位
- **应用场景**：医生辅助诊断 + 患者自助问诊
- **核心模式**：GraphRAG（图谱检索增强生成）
- **数据来源**：寻医问药网医学数据采集
- **交互方式**：对话式、多轮次、上下文感知的智能问答

### 1.3 用户群体
- 医生：获取诊疗参考、辅助决策
- 患者：获取可信任的健康指导
- 学生：学习完整的系统设计和开发

## 2. 核心价值主张

### 2.1 医学知识的可信任性
- 基于知识图谱提供**有根据的回答**（带引用源）
- 每个回答都能追溯到具体的医学实体和关系
- 支持"为什么"的深度理解

### 2.2 对话式的用户体验
- 类似大模型的自然对话体验
- 支持多轮上下文对话
- 自动理解医学术语和症状描述

### 2.3 灵活的身份适配
- 医生版本：专业术语、诊疗方案
- 患者版本：通俗易懂、健康建议
- 学生版本：完整知识讲解

## 3. 功能需求

### 3.1 数据采集模块
- 自动爬取寻医问药网医疗数据（疾病、症状、药品、检查等）
- 支持断点续传、增量更新
- 目标：数据量越多越好，无上限

### 3.2 知识图谱构建
- 从原始数据中提取实体和关系
- 自动去重、数据清洗、规范化
- 批量导入 Neo4j 图数据库

### 3.3 智能问答服务
- 接收自然语言问题
- 通过 GraphRAG 检索相关知识子图
- 调用大模型生成回答
- 返回答案 + 可追溯的引用源

### 3.4 用户管理
- 用户注册、登录、权限管理（MySQL）
- 对话历史记录和管理
- 用户反馈收集和分析

## 4. 非功能需求

| 维度 | 要求 |
|------|------|
| 并发能力 | 支持数百用户并发（毕业设计参考值） |
| 响应时间 | 问答响应 < 5秒 |
| 数据准确率 | 采集数据准确率 > 95% |
| 系统可用性 | 99%+ 可用性 |
| 代码质量 | 单元测试覆盖率 > 80% |

## 5. 技术约束

### 5.1 必用技术栈
- **图数据库**：Neo4j（知识图谱存储）
- **关系数据库**：MySQL（用户数据管理）
- **缓存**：MongoDB（原始数据）、Redis（热数据缓存）
- **编程语言**：Python 3.8+
- **API 框架**： FastAPI
- **LLM 集成**：OpenAI API 或通义千问 SDK

### 5.2 可选技术
- Docker / Docker Compose（部署）
- Nginx（反向代理）
- Prometheus + Grafana（监控）
- ELK Stack（日志管理）

## 6. 成功标准

- ✅ 完整的 ETL 管道：采集 → 清洗 → 入库
- ✅ GraphRAG 检索功能正常运作
- ✅ 用户管理和对话历史存储完整
- ✅ API 服务稳定可用
- ✅ 单元测试覆盖 > 80%
- ✅ 完整的技术文档和部署指南
- ✅ 毕业设计报告达到要求

## 7. 时间规划

| 阶段 | 时间 | 关键交付物 |
|------|------|----------|
| 需求分析 | Week 1 | 规范文档 |
| 系统设计 | Week 2 | 架构设计 + ADRs |
| 开发实现 | Week 3-5 | 完整代码库 |
| 测试验证 | Week 6 | 测试报告 |
| 部署上线 | Week 7 | 生产部署 |
| 运维优化 | Week 8+ | 运维手册 |

---

**文档版本**：1.0  
**创建日期**：2025-11-21 
**状态**：已批准，进入规划阶段
